<h1>Course List</h1>
<div class="center">
  <%= form_tag courses_path, :method => 'get' do %>
      <p>
        Course Number:
        <%= text_field_tag :query, params[:query] %>
        <%= submit_tag 'Search', :course_number => nil %>
      </p>
  <% end %>
</div>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>Course Number</th>
      <th>Title</th>
      <th>Description</th>
      <th>Start Date</th>
      <th>End Date</th>
      <th>Status</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @courses.each do |course| %>
      <tr>
        <td><%=link_to course.course_number, course%></td>
        <td><%=course.title%></td>
        <td><%=course.description%></td>
        <td><%=course.start_date%></td>
        <td><%=course.end_date%></td>
        <td><%=course.status%></td>
        <td><%= link_to 'Show', course, class: 'btn btn-info btn-sm' %></td>
        <% if (current_user.is_a? Admin) || (current_user.is_a? Instructor) %>
            <td><%= link_to 'Edit', edit_course_path(course), class: 'btn btn-warning btn-sm' %></td>
        <% end %>
         <% if current_user.is_a? Admin %>
             <td><%= link_to 'Destroy', course, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %></td>
         <% end %>
        <% if current_user.is_a? Student %>
          <td>
            <%= form_for(@enrollment) do |f| %>
                <%= f.hidden_field :course_id, :value => course.id %>
                <%= f.hidden_field :user_id, :value => current_user.id %>
                <%= f.hidden_field :approve, :value => false %>
                <%= f.hidden_field :deny, :value => false %>
                <div class="actions">
                  <%= f.submit :Enroll %>
                </div>
            <%end%>
          </td>
        <%end%>
      </tr>
    <% end %>
  </tbody>
</table>